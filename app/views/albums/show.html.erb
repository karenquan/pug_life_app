<div class="container">
  <h1><%= @album.title %></h1>
  <p><%= @album.description %></p>
  <p>By: <%= link_to @album.user.username, user_path(@album.user_id) %></p>

  <div class="flex-container">
    <% @images.sort { |a,b| b.updated_at <=> a.updated_at }.each do |image| %>
      <% if current_user %> <!-- only display hover effect on image if not album owner (so they can click on edit link -->
        <% if current_user.id == @album.user_id %>
          <div class="image flex-item">
        <% else %>
            <div class="image hover-image flex-item">
        <% end %>
      <% end %>

      <%= render "images/image_info", :image => image %>

      <% if current_user %> <!-- allow user to edit images if user is album owner -->
        <% if current_user.id == @album.user_id %>
          <% @imageId = image.id %>
          <p class="admin-image-actions"><%= link_to 'Edit', edit_image_path(image.id) %><!-- <a class="edit-button" data-image-id="<%= image.id %>">Edit</a> --> | <%= link_to 'Delete', image_path(:id => image.id), method: :delete, data: { confirm: 'Are you sure you want to delete this image?' } %></p>
        <% end %>
      <% end %>
    </div>
  <% end %>
  </div>

  <% if current_user %> <!-- add actions if user is album owner -->
    <% if current_user.id == @album.user_id %>
      <div class="album-owner-actions">
        <%= link_to 'Add Image', new_album_image_path(@album), class: 'add-button' %>
        <%= link_to 'Edit Album', edit_album_path(@album), class: 'edit-button' %>
        <%= link_to 'Delete Album', album_path(@album), class: 'delete-button', method: :delete, data: { confirm: 'Are you sure you want to remove this album?' } %>
      </div>
    <% end %>
  <% end %>
</div>
