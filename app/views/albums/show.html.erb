<h1><%= @album.title %></h1>
<p><%= @album.description %></p>
<span>By: <%= link_to @album.user.username, user_path(@album.user_id) %></span>

<% @images.sort { |a,b| b.updated_at <=> a.updated_at }.each do |image| %>
  <div class="image">
      <div class="image-display" style="background-image: url(<%= image.url %>)"></div>
      <div class="image-info hide">
        <h3><%= image.title %></h3>
        <p class="image-description"><%= image.description %></p>
        <p class="image-date"><%= image.created_at.strftime("%B %d, %Y") %></p>
        <span class="image-username hide"><%= image.album.user.username %></span>
        <span class="image-user-path hide">By: <%= link_to image.album.user.username, user_path(image.album.user.id) %></span>
        <span class="image-url hide"><%= image.url %></span>
      </div>
      <% if current_user.id == @album.user_id %>
        <% @imageId = image.id %>
        <p><%= link_to 'Edit', edit_image_path(image.id) %><!-- <a class="edit-button" data-image-id="<%= image.id %>">Edit</a> --> | <%= link_to 'Delete', image_path(:id => image.id), method: :delete, data: { confirm: 'Are you sure you want to delete this image?' } %></p>
      <% end %>
    </div>
<% end %>

<div class="add modal hide">
  <div class="content">
    <div class="close"></div>
    <%= form_for [@album, @image] do |f| %>
      <div>
        <%= f.label :url, 'Image URL' %>
        <%= f.file_field :url %>
      </div>
      <div>
        <%= f.label :title %>
        <%= f.text_field :title %>
      </div>
      <div>
        <%= f.label :description %>
        <%= f.text_area :description %>
      </div>
      <%= f.submit 'Submit' %>
    <% end %>
  </div>
</div>

<div class="edit modal hide">
  <div class="content">
    <div class="close"></div>
    <%= form_for @album do |f| %>
      <div>
        <%= f.label :title %>
        <%= f.text_field :title %>
      </div>
      <div>
        <%= f.label :description %>
        <%= f.text_field :description %>
      </div>
      <%= f.submit 'Update' %>
    <% end %>
  </div>
</div>

<% if current_user.id == @album.user_id %>
  <div>
    <a class="add-button">Add Image</a>
    <a class="edit-button">Edit Album</a>
    <%= link_to 'Delete Album', album_path(:id => @album.id), class: 'delete-button', method: :delete, data: { confirm: 'Are you sure you want to remove this album?' } %>
  </div>
<% end %>
